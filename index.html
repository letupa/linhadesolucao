<!DOCTYPE html>
<html lang="pt-BR">
<head>
<style>
/* === v5 IMPACT Enhancements === */
/* Logo pulse glow */
.logo-card{
  animation: logoPulse 4.5s ease-in-out infinite;
}
@keyframes logoPulse{
  0%,100%{ box-shadow: 0 0 18px rgba(255,214,10,.45),0 0 34px rgba(255,214,10,.25); }
  50%{    box-shadow: 0 0 24px rgba(255,214,10,.70),0 0 56px rgba(255,214,10,.35); }
}

/* Buttons sheen effect */
button{ position:relative; overflow:hidden; }
button::after{
  content:""; position:absolute; top:-120%; left:-30%;
  width:60%; height:340%; transform:rotate(25deg);
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.45) 50%, rgba(255,255,255,0) 100%);
  transition: transform .45s ease, left .45s ease, top .45s ease;
}
button:hover::after{ left:120%; top:-40%; }

/* Success micro-anim */
.success{ animation: popIn .35s ease-out; }
@keyframes popIn{ from{ transform:scale(.97); opacity:.2 } to{ transform:scale(1); opacity:1 } }

/* Admin panel (RH) */
.rh-panel-overlay{ position:fixed; inset:0; background: rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:99999; }
.rh-panel{ width:min(100%, 920px); background:#0C1B2E; color:#EAF2FF; border-radius:16px; box-shadow: 0 20px 60px rgba(0,0,0,.5); border: 1px solid rgba(255,255,255,.1); }
.rh-head{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid rgba(255,255,255,.08); }
.rh-head h3{ margin:0; font-size:18px; color:#FFD60A }
.rh-body{ padding:12px 16px; max-height:66vh; overflow:auto; }
.rh-controls{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px; }
.rh-controls input, .rh-controls select{ padding:8px 10px; border-radius:10px; border:none; }
.rh-table{ width:100%; border-collapse: collapse; }
.rh-table th, .rh-table td{ padding:10px; border-bottom:1px solid rgba(255,255,255,.06); text-align:left; font-size:14px; }
.rh-badges{ display:flex; gap:6px; flex-wrap:wrap }
.badge{ background: rgba(255,214,10,.14); color:#FFD60A; border-radius:999px; padding:2px 8px; font-size:12px; }
.rh-foot{ display:flex; justify-content:flex-end; gap:8px; padding:12px 16px; border-top:1px solid rgba(255,255,255,.08); }
.rh-btn{ background:#FFD60A; color:#000; font-weight:700; border:none; border-radius:10px; padding:10px 12px; cursor:pointer }

/* Toast */
.toast{ position:fixed; right:16px; bottom:16px; background:#0C1B2E; color:#EAF2FF; border:1px solid rgba(255,255,255,.1); border-radius:12px; padding:10px 14px; z-index:9999; box-shadow:0 12px 30px rgba(0,0,0,.4); display:none }
.toast.show{ display:block; animation: fadeSlide .3s ease-out }
@keyframes fadeSlide{ from{ opacity:0; transform: translateY(8px)} to{ opacity:1; transform: translateY(0)} }

/* Dark mode tuning */
@media (prefers-color-scheme: dark){
  .menu{ background: rgba(0,0,0,.18); }
  .welcome{ background: rgba(255,255,255,.06); }
}

</style>
<style>
.logo-wrap{width:100%;display:flex;justify-content:center;margin:0 0 16px;}
.logo-card{display:flex;align-items:center;gap:16px;background:#0C1B2E;padding:18px 22px;border-radius:20px;border:2px solid #FFD60A;box-shadow:0 0 20px #FFD60A,0 0 42px rgba(255,214,10,.38);}
.logo-icon{width:70px;height:70px;flex:0 0 auto;}
.logo-title{margin:0;color:#FFD60A;font-size:28px;font-weight:800;letter-spacing:.2px;}
.logo-sub{margin:2px 0 0;color:#EAF0FF;font-size:14px;}
</style>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Linha de Solução — v4 TURBO+</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background: linear-gradient(135deg, #004AAD, #00B4D8); color: #fff; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 20px; }
    header { text-align: center; margin-bottom: 30px; background-color: rgba(0,0,0,0.3); padding: 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    h1 { font-size: 2.2em; color: #FFD60A; margin-bottom: 6px; text-shadow: 2px 2px 6px rgba(0,0,0,0.3); }
    h2 { font-size: 1em; font-weight: 400; color: #E0E0E0; }
    .welcome { background: rgba(255, 255, 255, 0.08); padding: 18px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); text-align: center; margin-bottom: 20px; max-width: 1100px; line-height: 1.5; }
    .bold { font-weight: bold; color: #FFD60A; }
    .menu { background: rgba(0,0,0,0.15); border-radius: 12px; padding: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.12); width: 100%; max-width: 1100px; }
    button { background: #FFD60A; border: none; color: #000; font-weight: 700; padding: 12px 16px; margin: 10px 0; border-radius: 10px; cursor: pointer; transition: all 0.18s ease; width: 100%; box-shadow: 0 2px 8px rgba(0,0,0,0.12); }
    button.small { width: auto; padding: 8px 12px; display: inline-block; }
    button.pill { border-radius: 999px; padding: 6px 12px; font-size: .9em; }
    button:hover { transform: translateY(-2px); }
    textarea, select, input[type=text], input[type=tel] { width: 100%; padding: 10px; margin: 8px 0; border-radius: 8px; border: none; font-size: 1em; }
    .hidden { display: none; }
    footer { margin-top: 18px; font-size: 0.9em; color: #E0E0E0; opacity: 0.8; }
    ul { text-align: left; margin-left: 20px; line-height: 1.6; }
    li { margin-bottom: 6px; }
    .muted { color: rgba(224,224,224,0.9); font-size: 0.95em; }
    .success { margin-top:10px; padding:10px; background: rgba(16,185,129,0.12); border-radius:8px; color:#10b981; }
    .note { background: rgba(255,255,255,0.08); padding: 12px; border-radius: 10px; margin: 8px 0; }
    details { background: rgba(255,255,255,0.06); border-radius: 10px; padding: 10px 12px; margin: 8px 0; }
    summary { cursor: pointer; font-weight: 700; color: #FFD60A; }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 880px) { .grid-2 { grid-template-columns: 1fr; } }
    .tag { display: inline-block; background: rgba(255,214,10,0.15); color: #FFD60A; padding: 2px 8px; border-radius: 12px; font-size: .85em; margin-right: 8px; }
    /* Search UI */
    .search-wrap { background: rgba(0,0,0,0.18); border-radius: 12px; padding: 12px; margin-bottom: 16px; }
    .row { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; }
    .chips { margin-top: 8px; }
    .chip { display: inline-block; background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 999px; margin: 4px; font-size: .85em; cursor: pointer; }
    .result-card { background: rgba(0,0,0,0.22); border-radius: 12px; padding: 12px; margin: 8px 0; }
    .small-muted { font-size: .85em; color: rgba(224,224,224,0.85); }
    .highlight { background: rgba(255,214,10,0.25); border-radius: 6px; padding: 0 4px; }
    .autocomplete { position: relative; }
    .suggestions { position: absolute; z-index: 9999; background: rgba(0,0,0,0.9); width: 100%; max-height: 240px; overflow-y: auto; border-radius: 10px; box-shadow: 0 6px 24px rgba(0,0,0,0.4); }
    .suggestions div { padding: 8px 10px; border-bottom: 1px solid rgba(255,255,255,0.07); cursor: pointer; }
    .suggestions div:hover { background: rgba(255,214,10,0.12); }
    .ver-tambem { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
    .disclaimer { font-size: .85em; color: #fef08a; }
    /* Glossário */
    .gloss { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    @media (max-width: 880px) { .gloss { grid-template-columns: 1fr; } }
    .gloss-item { background: rgba(0,0,0,0.22); border-radius: 12px; padding: 12px; }
    .gloss-item h4 { margin: 0 0 6px 0; }
  
/* WhatsApp RH button */
.whatsapp-btn{background:#25D366;color:#fff;display:inline-flex;gap:8px;align-items:center;padding:12px 16px;border-radius:12px;text-decoration:none;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,.15);transition:transform .15s ease, background .15s ease; margin-top:10px}
.whatsapp-btn:hover{background:#1EBE5D;transform:translateY(-1px)}
.whatsapp-icon{width:18px;height:18px;display:inline-block}


/* WhatsApp Flutuante (Home) */
.wa-float{position:fixed;right:18px;bottom:18px;z-index:9999;display:none}
.wa-float a{background:#25D366;color:#fff;display:inline-flex;gap:8px;align-items:center;padding:12px 16px;border-radius:999px;text-decoration:none;font-weight:800;box-shadow:0 10px 24px rgba(0,0,0,.22);transition:transform .15s ease, background .15s ease}
.wa-float a:hover{background:#1EBE5D;transform:translateY(-1px)}
.wa-float svg{width:18px;height:18px}
@media (max-width:560px){
  .wa-float{right:12px;bottom:12px}
  .wa-float a{padding:12px 14px}
  .wa-float span{display:none} /* deixa só o ícone no mobile pra não poluir */
}
@media (prefers-reduced-motion: reduce){
  .wa-float a{transition:none}
}

</style>
</head>
<body>

  <!-- NOVA LOGO -->
  <div class="logo-wrap">
    <div class="logo-card" role="img" aria-label="Linha de Solução — Seu Problema. Nossa Solução.">
      <svg class="logo-icon" viewBox="0 0 100 100" aria-hidden="true">
        <path d="M60 20h20a10 10 0 0 1 10 10v24a10 10 0 0 1-10 10h-6l-6 10-2-10h-6a10 10 0 0 1-10-10V30a10 10 0 0 1 10-10z" fill="#FFD60A"/>
        <path d="M18 28h40a10 10 0 0 1 10 10v22a10 10 0 0 1-10 10H40l-8 12 2-12H18a10 10 0 0 1-10-10V38a10 10 0 0 1 10-10z" fill="#11A8A6"/>
        <path d="M28 49l9 9 20-20" fill="none" stroke="#ffffff" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M32 68c16-16 28-24 46-26" fill="none" stroke="#FFD60A" stroke-width="8" stroke-linecap="round"/>
        <path d="M78 40l-5 2 6 2" fill="none" stroke="#ffffff" stroke-width="6" stroke-linecap="round"/>
      </svg>
      <div>
        <h1 class="logo-title">Linha de Solução</h1>
        <div class="logo-sub">Seu Problema. Nossa Solução.</div>
      </div>
    </div>
  </div>



  
<!-- HERO LOGO (animado) -->
<style>
  .hero-logo{ 
    background: linear-gradient(135deg, #0b1f3a 0%, #0b335a 100%);
    padding: 28px 16px 24px; 
    display:flex; align-items:center; justify-content:center; 
    border-radius: 16px; margin: 8px 0 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.18);
  }
  .hero-wrap{ display:flex; gap:16px; align-items:center; justify-content:center; flex-wrap:wrap }
  .hero-title{
  color:#FFD60A;
  font-weight:800;
  font-size:clamp(20px,3.4vw,32px);
  line-height:1.1;
  margin:-6px 0 0;
  text-align:center;
  animation: fadeUp 1.2s ease-out both, goldGlow 3.5s ease-in-out infinite;
}
@keyframes fadeUp {
  from { opacity:0; transform:translateY(14px); }
  to { opacity:1; transform:translateY(0); }
}
@keyframes goldGlow {
  0%, 100% { text-shadow: 0 0 2px #FFD60A, 0 0 4px #FFD60A; opacity:0.9; }
  50% { text-shadow: 0 0 6px #FFEB99, 0 0 12px #FFD60A; opacity:1; }
}
  100% { text-shadow: 0 0 6px #FFEB99, 0 0 10px #FFD60A; opacity:1; }
}
  100% { text-shadow: 0 0 12px #FFEE88, 0 0 20px #FFD60A; }
}
  .hero-sub{ color:#e8eef7; font-weight:500; margin:0; text-align:center; font-size: clamp(12px,2.4vw,14px) }
  .hero-logo svg{ width:72px; height:72px; }
  @media (min-width: 800px){
    .hero-logo svg{ width:84px; height:84px; }
  }
  /* Animações */
  .bubble{ transform-origin:center; animation:bubbleIn .6s ease-out both }
  .check{ stroke-dasharray: 220; stroke-dashoffset: 220; animation: draw .9s .35s ease-out forwards }
  @keyframes bubbleIn { from{ transform:scale(.85); opacity:0 } to{ transform:scale(1); opacity:1 } }
  @keyframes draw { to{ stroke-dashoffset: 0 } }
</style>

<!-- /HERO LOGO -->

<section class="welcome"><p><strong>Bem-vindo(a) ao Linha de Solução!</strong><br>Este canal foi criado para <strong>esclarecer dúvidas</strong>, <strong>registrar reclamações</strong>, <strong>dar feedbacks</strong> e <strong>consultar seus direitos e benefícios</strong>.<br>As informações são <strong>100% sigilosas</strong> — apenas o setor de <strong>Recursos Humanos</strong> tem acesso às respostas.<br>Sua identidade é <strong>preservada</strong> e todas as respostas permanecem <strong>anônimas</strong>.<br><br><strong>Informações com base na CLT e práticas usuais de mercado.</strong><br><strong>Aviso:</strong> Conteúdo informativo. Pode haver variações por acordo/CC e atualizações legais. Para casos concretos, acione o RH/jurídico.</p></section>

  <!-- MAIN MENU -->
  <section class="menu" id="mainMenu">
    <button onclick="showSection('consultas')">Consultas Rápidas</button>
    <button onclick="showSection('reclamacoes')">Reclamações</button>
    <button onclick="showSection('sugestoes')">Sugestões de Melhorias</button>
    <button onclick="showSection('psicologos')">Psicólogos</button>
    <button onclick="showSection('rh')">Falar com o RH</button>
  </section>

  <!-- CONSULTAS -->
  <section id="consultas" class="menu hidden">
    <h3>Consultas Rápidas</h3>
    <div class="muted">Pesquise por palavras-chave (ex.: "férias fracionamento", "13º parcelas", "rescisão sem justa causa", "horas extras feriado") ou abra o <button class="small pill" id="btnGlossarioTop">Glossário CLT</button>.</div>

    <!-- Search block -->
    <div class="search-wrap">
      <div class="row autocomplete">
        <input type="text" id="searchQuery" placeholder="Digite sua dúvida (ex.: posso vender férias? aviso prévio proporcional? banco de horas prazos?)">
        <button id="searchBtn">Buscar</button>
        <div id="suggestions" class="suggestions hidden"></div>
      </div>
      <div class="chips small-muted">
        Sugestões rápidas:
        <span class="chip" data-q="férias fracionamento abono">Férias</span>
        <span class="chip" data-q="13º parcelas cálculo">13º</span>
        <span class="chip" data-q="FGTS multa 40% saque">FGTS</span>
        <span class="chip" data-q="horas extras 50% 100% feriados">Horas Extras</span>
        <span class="chip" data-q="adicional noturno 20% 22h às 5h">Adicional Noturno</span>
        <span class="chip" data-q="atestado telemedicina prazos">Atestados</span>
        <span class="chip" data-q="rescisão sem justa causa prazos">Rescisão</span>
        <span class="chip" data-q="aviso prévio proporcional 30 dias + 3">Aviso Prévio</span>
        <span class="chip" data-q="banco de horas prazos compensação">Banco de Horas</span>
        <span class="chip" data-q="estabilidade acidente de trabalho CAT">Estabilidade por Acidente</span>
      </div>
      <div id="searchResult" class="note"></div>
    </div>

    <div class="grid-2">
      <button onclick="showContent('planos')">Plano de Saúde</button>
      <button onclick="showContent('beneficios')">Benefícios</button>
      <button onclick="showContent('regras')">Regras Internas</button>
      <button onclick="showContent('rescisao')">Rescisão / Demissão</button>
      <button onclick="showContent('atestados')">Atestados</button>
      <button onclick="showContent('direitos')">Direitos dos Funcionários</button>
    </div>

    <!-- Glossário dentro de Consultas -->
    <div style="margin-top:16px">
      <details id="glossarioBox">
        <summary>📘 Glossário CLT — clique para expandir</summary>
        <div class="gloss" id="glossarioGrid"></div>
      </details>
    </div>

    <button class="small" onclick="backToMenu()">← Voltar</button>
  </section>

  <!-- AREA DE CONTEÚDO DINÂMICO -->
  <section id="conteudoDetalhado" class="menu hidden"></section>

  <!-- RECLAMAÇÕES -->
  <section id="reclamacoes" class="menu hidden">
    <h3>Registrar Reclamação</h3>
    <label for="rec-setor">Setor</label>
    <select id="rec-setor">
      <option value="">Selecione um setor...</option>
      <option>Administrativo</option>
      <option>Financeiro</option>
      <option>Comercial</option>
      <option>Operacional</option>
      <option>Logística</option>
      <option>Recursos Humanos</option>
    </select>
    <label for="rec-text">Reclamação</label>
    <textarea id="rec-text" placeholder="Descreva sua reclamação (sem limite de caracteres)"></textarea>
    <label for="rec-urg">É urgente?</label>
    <select id="rec-urg"><option>Não</option><option>Sim</option></select>
    <button id="send-rec-btn">Enviar Reclamação</button>
    <div id="rec-result"></div>
    <button class="small" onclick="backToMenu()">← Voltar</button>
  </section>

  <!-- SUGESTÕES -->
  <section id="sugestoes" class="menu hidden">
    <h3>Sugestões de Melhorias</h3>
    <label for="sug-setor">Setor</label>
    <select id="sug-setor">
      <option value="">Selecione um setor...</option>
      <option>Administrativo</option>
      <option>Financeiro</option>
      <option>Comercial</option>
      <option>Operacional</option>
      <option>Logística</option>
      <option>Recursos Humanos</option>
    </select>
    <label for="sug-text">Sugestão</label>
    <textarea id="sug-text" placeholder="Deixe sua sugestão (sem limite de caracteres)"></textarea>
    <label for="sug-urg">É urgente?</label>
    <select id="sug-urg"><option>Não</option><option>Sim</option></select>
    <button id="send-sug-btn">Enviar Sugestão</button>
    <div id="sug-result"></div>
    <button class="small" onclick="backToMenu()">← Voltar</button>
  </section>

  <!-- PSICÓLOGOS -->
  <section id="psicologos" class="menu hidden">
    <h3>Psicólogos</h3>
    <p class="muted">Agende um horário com o psicólogo da empresa (Segunda a Sexta).</p>

    <label for="psy-name">Nome do Colaborador</label>
    <input id="psy-name" type="text" placeholder="Digite seu nome completo">

    <label for="psy-rg">RG</label>
    <input id="psy-rg" type="text" placeholder="Digite seu RG">

    <label for="psy-day">Dia</label>
    <select id="psy-day">
      <option>Segunda-feira</option>
      <option>Terça-feira</option>
      <option>Quarta-feira</option>
      <option>Quinta-feira</option>
      <option>Sexta-feira</option>
    </select>
    <label for="psy-time">Horário</label>
    <select id="psy-time">
      <option>09:00</option>
      <option>10:00</option>
      <option>11:00</option>
      <option>13:00</option>
      <option>14:00</option>
      <option>15:00</option>
      <option>16:00</option>
    </select>
    <button id="book-psy-btn">Agendar Horário</button>
    <div id="psy-result"></div>

    <h4>Psicólogos indicados (externos)</h4>
    <p class="muted">- Ana Silva — (11) 99999-1111<br>- João Santos — (11) 98888-2222<br>- Clara Costa — (21) 97777-3333</p>
    <button class="small" onclick="backToMenu()">← Voltar</button>
  </section>

  <!-- RH -->
  <section id="rh" class="menu hidden">
    <h3>Falar com o RH — WhatsApp</h3>
    <p class="muted">⚠️ Atenção: ao prosseguir você perderá o anonimato.</p>
    <label for="rh-phone">Seu número (com DDD)</label>
    <input id="rh-phone" type="tel" placeholder="Ex: 11999998888">
    <label for="rh-urg">É urgente?</label>
    <select id="rh-urg"><option>Não</option><option>Sim</option></select>
    <button id="open-whatsapp">Falar Agora (WhatsApp)</button>
    <button class="small" onclick="backToMenu()">← Voltar</button>
  

<div class="rh-whatsapp-cta">
  <a class="whatsapp-btn" target="_blank" rel="noopener" 
     href="https://wa.me/5514991078126?text=Ol%C3%A1!%20Gostaria%20de%20falar%20com%20o%20RH.">
    <svg class="whatsapp-icon" viewBox="0 0 32 32" aria-hidden="true">
      <path fill="#fff" d="M19.11 17.38c-.3-.15-1.77-.87-2.05-.97-.28-.1-.48-.15-.69.15-.2.3-.79.97-.97 1.17-.18.2-.36.22-.66.07-.3-.15-1.28-.47-2.44-1.5-.9-.8-1.5-1.77-1.68-2.07-.18-.3-.02-.47.13-.62.13-.13.3-.36.44-.54.15-.18.2-.3.3-.5.1-.2.05-.37-.02-.52-.07-.15-.69-1.67-.95-2.28-.25-.6-.5-.52-.69-.52h-.59c-.2 0-.52.07-.79.37-.27.3-1.04 1.02-1.04 2.5s1.06 2.9 1.21 3.09c.15.2 2.09 3.19 5.06 4.47.71.31 1.26.5 1.69.64.71.23 1.36.2 1.87.12.57-.08 1.77-.72 2.02-1.41.25-.7.25-1.29.18-1.41-.07-.12-.25-.2-.55-.35z"/>
      <path fill="#25D366" d="M26.67 5.35A12.87 12.87 0 0 0 16 1.33c-7.11 0-12.87 5.77-12.87 12.87 0 2.27.6 4.47 1.75 6.42L2.67 30.67 12 28.6c1.87 1.02 3.98 1.56 6.15 1.56 7.11 0 12.87-5.77 12.87-12.87 0-3.43-1.33-6.65-3.77-9zm-10.67 22a10.7 10.7 0 0 1-5.47-1.5l-.39-.23-6.47 1.47 1.38-6.31-.25-.41a10.7 10.7 0 0 1-1.6-5.57c0-5.91 4.81-10.72 10.72-10.72s10.72 4.81 10.72 10.72-4.81 10.72-10.72 10.72z"/>
    </svg>
    Falar com o RH pelo WhatsApp
  </a>
</div>

</section>

  <footer>&copy; 2025 - Linha de Solução | Recursos Humanos Corporativo</footer>

  <script>
  (function(){
    function hideAll(){ document.querySelectorAll('.menu').forEach(m=>m.classList.add('hidden')); }
    function showSection(id){ hideAll(); const el=document.getElementById(id); if(el) el.classList.remove('hidden'); }
    function backToMenu(){ hideAll(); document.getElementById('mainMenu').classList.remove('hidden'); }
    window.showSection=showSection; window.backToMenu=backToMenu;

    function goTo(term){
      const q=document.getElementById('searchQuery'); if(!q) return;
      q.value=term;
      doSearch();
      window.scrollTo({top:0, behavior:'smooth'});
    }
    window.goTo = goTo;

    const KB = [
      { key:['ferias','férias','fracionamento','abono pecuniario','abono pecuniário','vender férias'],
        rel:['Aviso Prévio','Faltas Justificadas','Horas Extras','DSR','Banco de Horas'],
        html:`<div class="result-card">
          <h4>Férias — Regras gerais</h4>
          <ul>
            <li><strong>Direito:</strong> 30 dias a cada 12 meses (período aquisitivo).</li>
            <li><strong>Fracionamento:</strong> até <strong>3 períodos</strong> (1 ≥ 14 dias; demais ≥ 5 dias).</li>
            <li><strong>Pagamento:</strong> salário + <strong>1/3</strong> até <strong>2 dias antes</strong> do início.</li>
            <li><strong>Abono pecuniário:</strong> vender até <strong>1/3</strong> (10 dias), respeitando prazos internos.</li>
            <li><strong>Coletivas:</strong> possíveis por setor/empresa; seguir prazos de comunicação.</li>
            <li><strong>Proporcionais:</strong> na rescisão, conforme meses trabalhados.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['13','13º','décimo terceiro','decimo terceiro','13o','parcelas 13'],
        rel:['FGTS','DSR','Férias'],
        html:`<div class="result-card">
          <h4>13º Salário — Cálculo e pagamento</h4>
          <ul>
            <li><strong>Pagamento:</strong> até <strong>2 parcelas</strong> (prática: nov/dez).</li>
            <li><strong>Cálculo:</strong> salário ÷ 12 × meses trabalhados no ano (≥ 15 dias contam).</li>
            <li><strong>Variáveis:</strong> horas extras/comissões podem entrar na média.</li>
            <li><strong>Proporcional:</strong> devido na rescisão conforme meses.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['fgts','multa 40','saque fgts','chave fgts','deposito 8'],
        rel:['Rescisão','Aviso Prévio','Seguro-Desemprego'],
        html:`<div class="result-card">
          <h4>FGTS — Depósitos, multa e saques</h4>
          <ul>
            <li><strong>Depósito:</strong> mensal de <strong>8%</strong> do salário.</li>
            <li><strong>Multa 40%:</strong> na rescisão <strong>sem justa causa</strong>.</li>
            <li><strong>Saques:</strong> nas hipóteses legais (demissão sem justa causa, moradia, doenças graves, aposentadoria etc.).</li>
            <li><strong>Chave:</strong> emitida para saque na rescisão quando cabível.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['aviso previo','aviso prévio','proporcional','30 dias + 3 dias'],
        rel:['Rescisão','FGTS','Férias'],
        html:`<div class="result-card">
          <h4>Aviso Prévio — Trabalhado ou indenizado</h4>
          <ul>
            <li><strong>Duração:</strong> mínimo <strong>30 dias</strong>, com proporcionalidade por tempo de serviço conforme regras vigentes.</li>
            <li><strong>Modalidades:</strong> trabalhado (redução de jornada/dias) ou indenizado.</li>
            <li><strong>Efeitos:</strong> altera data de término do contrato e prazos da rescisão.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['banco de horas','compensação','compensar horas','acordo banco'],
        rel:['Horas Extras','Jornada','DSR'],
        html:`<div class="result-card">
          <h4>Banco de Horas — Regras e prazos</h4>
          <ul>
            <li><strong>Previsão:</strong> exige acordo individual/CC válido definindo <strong>janelas de compensação</strong>.</li>
            <li><strong>Prazo de compensação:</strong> conforme acordo (ex.: até 6 meses/1 ano são práticas usuais em CC).</li>
            <li><strong>Controles:</strong> registros transparentes; saldos comunicados ao empregado.</li>
            <li><strong>Limites:</strong> respeita limites de jornada/intervalos e regras de saúde/segurança.</li>
            <li><strong>Rescisão:</strong> saldo positivo pode gerar pagamento; saldo negativo, descontos conforme acordo e legalidade.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['jornada','horas diarias','horas semanais','44 horas','8 horas'],
        rel:['Intervalo Intrajornada','Intervalo Interjornada','Horas Extras'],
        html:`<div class="result-card">
          <h4>Jornada de Trabalho — Limites gerais</h4>
          <ul>
            <li><strong>Típica:</strong> até <strong>8h/dia</strong> e <strong>44h/semana</strong>, salvo regimes específicos (12x36 etc.).</li>
            <li><strong>Intrajornada:</strong> pausa para refeição/descanso; ver item próprio.</li>
            <li><strong>Interjornada:</strong> mínimo de <strong>11h</strong> entre jornadas.</li>
            <li><strong>Ponto:</strong> controle conforme porte/atividade.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['horas extras','hora extra','adicional 50','100 feriado'],
        rel:['Banco de Horas','DSR','Jornada'],
        html:`<div class="result-card">
          <h4>Horas Extras — Adicionais e reflexos</h4>
          <ul>
            <li><strong>Adicional:</strong> em regra <strong>50%</strong> em dias úteis; domingos/feriados podem alcançar <strong>100%</strong> por acordo/CC.</li>
            <li><strong>Limites:</strong> respeitar máximos diários/semanais.</li>
            <li><strong>Reflexos:</strong> podem impactar DSR, 13º, férias, FGTS, conforme cálculo.</li>
            <li><strong>Compensação:</strong> possível via banco de horas válido.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['adicional noturno','hora noturna','22h','5h','20%'],
        rel:['Jornada','Intervalo Intrajornada'],
        html:`<div class="result-card">
          <h4>Adicional Noturno — Trabalho em horário noturno</h4>
          <ul>
            <li><strong>Urbano (referência):</strong> adicional de cerca de <strong>20%</strong> e hora reduzida (52m30s) entre <strong>22h e 5h</strong>.</li>
            <li><strong>Rural:</strong> regras e percentuais distintos por atividade.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['dsr','descanso semanal','repouso semanal'],
        rel:['Horas Extras','Jornada','Faltas Justificadas'],
        html:`<div class="result-card">
          <h4>DSR — Descanso Semanal Remunerado</h4>
          <ul>
            <li><strong>Direito:</strong> 1 repouso semanal, preferencialmente aos domingos.</li>
            <li><strong>Impacto:</strong> faltas/atrasos podem reduzir o DSR, conforme regras de cálculo.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['faltas justificadas','art 473','casamento','falecimento','nascimento'],
        rel:['Atestados','DSR'],
        html:`<div class="result-card">
          <h4>Faltas Justificadas — Exemplos</h4>
          <ul>
            <li><strong>Casamento:</strong> até <strong>3 dias</strong> consecutivos.</li>
            <li><strong>Falecimento de familiar próximo:</strong> até <strong>2 dias</strong>.</li>
            <li><strong>Nascimento de filho:</strong> regra geral <strong>5 dias</strong> (paternidade).</li>
            <li><strong>Outros:</strong> doação de sangue, alistamento, vestibular, convocação judicial etc.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['atestados','atestado','telemedicina','crm','cid'],
        rel:['Faltas Justificadas','INSS'],
        html:`<div class="result-card">
          <h4>Atestados — Requisitos e prazos</h4>
          <ul>
            <li><strong>Emissor:</strong> médico/dentista com identificação (nome, CRM/CRO, assinatura/carimbo).</li>
            <li><strong>Conteúdo:</strong> data e período (horas/dias); CID é opcional.</li>
            <li><strong>Envio:</strong> encaminhar ao RH conforme prazo interno (ideal até o próximo dia útil).</li>
            <li><strong>Telemedicina:</strong> válida com identificação e requisitos.</li>
            <li><strong>Fraude:</strong> é falta grave (pode gerar justa causa).</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['rescisao','rescisão','demissao','demissão','desligamento','acordo entre as partes'],
        rel:['Justa Causa','FGTS','Aviso Prévio','Seguro-Desemprego'],
        html:`<div class="result-card">
          <h4>Rescisão — Tipos e prazos</h4>
          <ul>
            <li><strong>Sem justa causa:</strong> verbas proporcionais + multa de FGTS (quando aplicável).</li>
            <li><strong>Pedido de demissão:</strong> verbas proporcionais sem multa FGTS.</li>
            <li><strong>Com justa causa:</strong> por falta grave; reduz direitos.</li>
            <li><strong>Término de contrato:</strong> prazo determinado.</li>
            <li><strong>Acordo entre as partes:</strong> regras próprias (metades em aviso/multa etc. conforme lei).</li>
            <li><strong>Prazo pagamento:</strong> até <strong>10 dias</strong> após término (prática usual).</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['justa causa','art 482','improbidade','insubordinacao','desidia','embriaguez','segredo'],
        rel:['Rescisão','Advertência/Disciplina'],
        html:`<div class="result-card">
          <h4>Justa Causa — Exemplos de falta grave</h4>
          <ul>
            <li><strong>Improbidade:</strong> fraude, desonestidade, furto.</li>
            <li><strong>Incontinência de conduta</strong> ou <strong>mau procedimento</strong>.</li>
            <li><strong>Negociação habitual</strong> prejudicial à empresa.</li>
            <li><strong>Condenação criminal</strong> sem suspensão da pena.</li>
            <li><strong>Desídia</strong> reiterada; <strong>embriaguez em serviço</strong>.</li>
            <li><strong>Violação de segredo</strong>, <strong>indisciplina/insubordinação</strong>, <strong>abandono</strong>.</li>
            <li><strong>Ofensas físicas/à honra</strong> (salvo legítima defesa); atos contra a segurança.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['estabilidade acidente','acidente de trabalho','cat','nexo'],
        rel:['INSS','Atestados','Justa Causa'],
        html:`<div class="result-card">
          <h4>Estabilidade por Acidente de Trabalho</h4>
          <ul>
            <li><strong>CAT:</strong> Comunicação de Acidente deve ser emitida conforme a ocorrência.</li>
            <li><strong>Estabilidade:</strong> em hipóteses legais, garantia no emprego por período após retorno do afastamento.</li>
            <li><strong>Benefícios:</strong> INSS pode conceder auxílio; perícia pode ser necessária.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['inss','auxilio doenca','auxílio-doença','beneficio','pericia'],
        rel:['Atestados','Estabilidade por Acidente'],
        html:`<div class="result-card">
          <h4>INSS — Benefícios e Perícia</h4>
          <ul>
            <li><strong>Auxílios:</strong> doença, acidente, aposentadorias etc., conforme contribuições e laudos.</li>
            <li><strong>Perícia:</strong> agendamento e documentação médica são fundamentais.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['intervalo intrajornada','pausa almoço','refeição'],
        rel:['Jornada','Adicional Noturno'],
        html:`<div class="result-card">
          <h4>Intervalo Intrajornada</h4>
          <ul>
            <li><strong>Jornadas > 6h:</strong> intervalo para refeição/descanso (redução só por acordo válido).</li>
            <li><strong>Entre 4h e 6h:</strong> intervalo menor (prática: 15min).</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['intervalo interjornada','11 horas','descanso entre jornadas'],
        rel:['Jornada'],
        html:`<div class="result-card">
          <h4>Intervalo Interjornada</h4>
          <ul>
            <li><strong>Mínimo:</strong> <strong>11 horas</strong> consecutivas entre jornadas.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['periculosidade','insalubridade','adicional 30','10 20 40'],
        rel:['EPI/NR','Jornada'],
        html:`<div class="result-card">
          <h4>Periculosidade & Insalubridade</h4>
          <ul>
            <li><strong>Periculosidade:</strong> adicional (p.ex. <strong>30%</strong>) conforme laudo/NR.</li>
            <li><strong>Insalubridade:</strong> adicional de <strong>10%/20%/40%</strong> (graus) por laudo técnico.</li>
            <li><strong>EPI:</strong> pode mitigar exposição; laudo define enquadramento.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['epi','equipamento de protecao','segurança','nr'],
        rel:['Periculosidade & Insalubridade'],
        html:`<div class="result-card">
          <h4>EPI/NR — Segurança do Trabalho</h4>
          <ul>
            <li><strong>EPI:</strong> fornecimento, uso e conservação obrigatórios quando aplicável.</li>
            <li><strong>Programas:</strong> PCMSO, PGR/PPRA, treinamentos e CIPA quando exigidos.</li>
            <li><strong>Incidentes:</strong> reporte imediato ao gestor/RH/SESMT.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['teletrabalho','home office','remoto'],
        rel:['Jornada','Intervalo Intrajornada','Segurança da Informação'],
        html:`<div class="result-card">
          <h4>Teletrabalho / Home Office</h4>
          <ul>
            <li><strong>Formalização:</strong> por política/aditivo definindo jornada, ergonomia, equipamentos e despesas.</li>
            <li><strong>Disponibilidade:</strong> regrada para evitar sobrecarga/contatos fora de hora.</li>
            <li><strong>Segurança da Informação:</strong> VPN, senhas, sigilo.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['aprendiz','jovem aprendiz','contrato aprendizagem'],
        rel:['Jornada','Benefícios'],
        html:`<div class="result-card">
          <h4>Aprendizagem — Contrato de Aprendiz</h4>
          <ul>
            <li><strong>Faixa etária:</strong> regras para 14–24 anos (salvo exceções).</li>
            <li><strong>Direitos:</strong> registro, salário, FGTS, férias, 13º e formação teórica/prática.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['experiencia','contrato de experiencia','90 dias'],
        rel:['Rescisão','FGTS'],
        html:`<div class="result-card">
          <h4>Contrato de Experiência</h4>
          <ul>
            <li><strong>Prazo:</strong> determinado, prática comum até <strong>90 dias</strong>, com possibilidade de prorrogação dentro do limite legal.</li>
            <li><strong>Rescisão:</strong> regras próprias para término antecipado ou ao fim do prazo.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['beneficios','benefícios','vt','vr','va','seguro de vida','plr'],
        rel:['Plano de Saúde','FGTS'],
        html:`<div class="result-card">
          <h4>Benefícios — Visão geral</h4>
          <ul>
            <li><strong>Vale-Transporte:</strong> desconto até <strong>6%</strong> do salário-base quando utilizado.</li>
            <li><strong>VR/VA:</strong> conforme política/convênio.</li>
            <li><strong>Plano de Saúde/Odonto:</strong> carências, coparticipação e rede (ver seção específica).</li>
            <li><strong>Seguro de Vida, Auxílio-Creche, PLR:</strong> conforme política/acordos.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` },
      { key:['plano de saude','convênio','carência','coparticipacao','rede credenciada'],
        rel:['Benefícios'],
        html:`<div class="result-card">
          <h4>Plano de Saúde — Uso e cobertura</h4>
          <ul>
            <li><strong>Cobertura:</strong> ambulatorial/hospitalar; verificar acomodação, obstetrícia, acompanhante.</li>
            <li><strong>Carências:</strong> prazos variáveis por procedimento.</li>
            <li><strong>Coparticipação:</strong> % sobre consultas/exames quando previsto; tetos por evento podem existir.</li>
            <li><strong>Telemedicina/Reembolso:</strong> conforme contrato com a operadora.</li>
          </ul>
          <div class="ver-tambem"></div>
        </div>` }
    ];

    const GLOSS = [
      {term:'Aviso Prévio Proporcional', def:'Acréscimo de dias ao aviso conforme tempo de serviço, além dos 30 dias mínimos.', go:'aviso prévio proporcional'},
      {term:'Banco de Horas', def:'Sistema de compensação: horas a mais são abatidas depois, conforme acordo válido.', go:'banco de horas'},
      {term:'DSR', def:'Descanso Semanal Remunerado; remunera o repouso semanal.', go:'DSR'},
      {term:'Interjornada', def:'Intervalo mínimo de 11h entre o fim de uma jornada e o início da próxima.', go:'intervalo interjornada'},
      {term:'Intrajornada', def:'Pausa dentro da jornada para refeição/descanso.', go:'intervalo intrajornada'},
      {term:'Periculosidade', def:'Adicional por atividade perigosa, conforme laudo/NR.', go:'periculosidade'},
      {term:'Insalubridade', def:'Adicional por exposição nociva (10/20/40%) conforme laudo.', go:'insalubridade'},
      {term:'Abono Pecuniário', def:'Venda de até 1/3 das férias (10 dias).', go:'abono pecuniário'},
      {term:'Justa Causa', def:'Desligamento por falta grave, com redução de direitos.', go:'justa causa'},
      {term:'CAT', def:'Comunicação de Acidente de Trabalho.', go:'CAT'},
      {term:'Telemedicina', def:'Atendimento médico remoto válido com identificação e registro.', go:'telemedicina'}
    ];

    function normalize(t){ return (t||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,''); }
    function highlight(text, query){
      const tokens = normalize(query).split(/\s+/).filter(w=>w.length>=3);
      let out = text;
      tokens.forEach(w=>{ out = out.replace(new RegExp('('+w+')','ig'), '<span class="highlight">$1</span>'); });
      return out;
    }
    function searchKB(query){
      const q = normalize(query);
      if(!q) return [];
      const scores = [];
      KB.forEach((item, idx)=>{
        let score = 0;
        item.key.forEach(k=>{
          const nk = normalize(k);
          if(q.includes(nk)) score += nk.length;
          nk.split(/\s+/).forEach(tok=>{ if(tok && q.includes(tok)) score += tok.length*0.8; });
        });
        if(score>0) scores.push({idx, score});
      });
      scores.sort((a,b)=> b.score - a.score);
      return scores.slice(0,8).map(s=> KB[s.idx]);
    }
    function attachVerTambem(container, relList){
      if(!relList || !relList.length) return;
      const box = container.querySelector('.ver-tambem');
      if(!box) return;
      box.innerHTML = '<span class="small-muted" style="margin-right:8px">Ver também:</span>';
      relList.forEach(r=>{
        const b = document.createElement('button');
        b.className='small pill';
        b.textContent=r;
        b.addEventListener('click', ()=> goTo(r));
        box.appendChild(b);
      });
    }
    function renderSuggestions(input, listEl){
      const val = normalize(input.value);
      const pool = Array.from(new Set(KB.flatMap(i=> i.key)));
      const cands = pool.filter(k=> normalize(k).includes(val) && val.length>=2).slice(0, 12);
      if(cands.length===0){ listEl.classList.add('hidden'); listEl.innerHTML=''; return; }
      listEl.innerHTML = cands.map(c=> '<div data-s="'+c+'">'+c+'</div>').join('');
      listEl.classList.remove('hidden');
    }
    function doSearch(){
      const qEl=document.getElementById('searchQuery');
      const res=document.getElementById('searchResult');
      const sugg=document.getElementById('suggestions');
      const query=(qEl.value||'').trim();
      const matches=searchKB(query);
      if(matches.length===0){
        res.innerHTML='<p class="small-muted">Nada encontrado. Tente termos como <em>férias, 13º, FGTS, rescisão, atestado, horas extras, adicional noturno, DSR, aviso prévio</em>. Se a dúvida for específica, descreva com mais detalhes.</p>';
        return;
      }
      const html = matches.map(m=> m.html).join('');
      res.innerHTML = highlight(html, query);
      const cards = res.querySelectorAll('.result-card');
      matches.forEach((m, i)=> attachVerTambem(cards[i], m.rel));
      sugg.classList.add('hidden');
    }
    window.doSearch = doSearch;

    function attachSearch(){
      const qEl=document.getElementById('searchQuery');
      const btn=document.getElementById('searchBtn');
      const sugg=document.getElementById('suggestions');
      if(!qEl || !btn) return;
      btn.addEventListener('click', doSearch);
      qEl.addEventListener('keydown', e=>{ if(e.key==='Enter') doSearch(); });
      document.querySelectorAll('.chip').forEach(ch=> ch.addEventListener('click', ()=>{ qEl.value = ch.getAttribute('data-q'); doSearch(); }));
      qEl.addEventListener('input', ()=> renderSuggestions(qEl, sugg));
      sugg.addEventListener('click', e=>{
        const t=e.target.closest('div[data-s]'); if(!t) return;
        qEl.value=t.getAttribute('data-s');
        sugg.classList.add('hidden');
        doSearch();
      });
      document.addEventListener('click', e=>{ if(!sugg.contains(e.target) && e.target!==qEl) sugg.classList.add('hidden'); });
    }

    function showContent(tipo){
      hideAll();
      const content=document.getElementById('conteudoDetalhado');
      let texto='';
      switch(tipo){
        case 'planos':
          texto=`
            <h3>Plano de Saúde</h3>
            <div class="note">Resumo prático do convênio médico corporativo. Condições específicas dependem do contrato com a operadora e do seu vínculo na empresa.</div>
            <ul>
              <li><span class="tag">Cobertura</span>Ambulatorial + Hospitalar (consultas, exames, internações, cirurgias).</li>
              <li><span class="tag">Coparticipação</span>% sobre procedimentos quando previsto; podem existir tetos.</li>
              <li><span class="tag">Carências</span>Variam por procedimento; urgência/emergência usualmente 24h.</li>
              <li><span class="tag">Rede</span>Checar app/portal da operadora.</li>
              <li><span class="tag">Telemedicina</span>Atendimento 24h para triagem e consultas básicas.</li>
              <li><span class="tag">Dependentes</span>Elegibilidade conforme política/operadora.</li>
              <li><span class="tag">Reembolso</span>Quando previsto em contrato; exige NF/relatório médico.</li>
            </ul>
            <div class="note">Dúvidas específicas de cobertura? Procure o RH.</div>
          `; break;
        case 'beneficios':
          texto=`
            <h3>Benefícios</h3>
            <ul>
              <li><span class="tag">Vale-Transporte</span>Desconto até <strong>6%</strong> do salário-base quando utilizado.</li>
              <li><span class="tag">VR/VA</span>Crédito mensal conforme política/convênio.</li>
              <li><span class="tag">Plano de Saúde/Odonto</span>Carências e coparticipação quando aplicável.</li>
              <li><span class="tag">Seguro de Vida, Auxílio-Creche, PLR</span>Conforme política/acordos.</li>
            </ul>
          `; break;
        case 'regras':
          texto=`
            <h3>Regras Internas e Cultura</h3>
            <ul>
              <li><span class="tag">Ponto</span>Registre entrada/saída/intervalos.</li>
              <li><span class="tag">Jornada</span>Observe carga horária; extras devem ser autorizadas.</li>
              <li><span class="tag">Segurança</span>Uso de EPI, reporte de riscos e incidentes.</li>
              <li><span class="tag">Conduta</span>Ambiente de respeito e ética; assédio e discriminação são proibidos.</li>
            </ul>
          `; break;
        case 'rescisao':
          texto=`
            <h3>Rescisão / Demissão</h3>
            <ul>
              <li>Sem justa causa, pedido de demissão, justa causa, término de contrato e acordo entre as partes.</li>
              <li>Verbas proporcionais, aviso prévio, FGTS e prazos usuais até 10 dias.</li>
            </ul>
          `; break;
        case 'atestados':
          texto=`
            <h3>Atestados Médicos — Quais são aceitos</h3>
            <ul>
              <li>Emitidos por médico/dentista (CRM/CRO), data e período indicados.</li>
              <li>Envio ao RH conforme prazo interno; telemedicina válida com requisitos.</li>
              <li>Fraude configura falta grave.</li>
            </ul>
          `; break;
        case 'direitos':
          texto=`
            <h3>Direitos dos Funcionários (resumo prático)</h3>
            <ul>
              <li>FGTS (8%), 13º, férias + 1/3, horas extras (adicionais), DSR, licenças.</li>
              <li>Adicionais de periculosidade/insalubridade por laudo.</li>
            </ul>
          `; break;
        default:
          texto='<p class="muted">Tópico não encontrado.</p>';
      }
      content.innerHTML = texto + '<div style="margin-top:12px"><button id="backFromContent" class="small">← Voltar</button></div>';
      content.classList.remove('hidden');
      document.getElementById('backFromContent').addEventListener('click', ()=> showSection('consultas'));
    }
    window.showContent = showContent;

    function renderGlossario(){
      const grid=document.getElementById('glossarioGrid');
      if(!grid) return;
      grid.innerHTML = GLOSS.map(g=>`
        <div class="gloss-item">
          <h4>${g.term}</h4>
          <p class="small-muted">${g.def}</p>
          <button class="small pill" onclick="goTo('${g.go}')">Buscar por: ${g.go}</button>
        </div>
      `).join('');
    }

    window.addEventListener('DOMContentLoaded', function(){
      showSection('mainMenu');

      // saveRecord antigo removido para Firestore
  })();
  </script>

<!-- Botão flutuante WhatsApp (aparece só na Home) -->
<div class="wa-float" id="waFloat" aria-label="Contato RH via WhatsApp">
  <a target="_blank" rel="noopener"
     href="https://wa.me/5514991078126?text=Ol%C3%A1!%20Gostaria%20de%20falar%20com%20o%20RH.">
    <svg viewBox="0 0 32 32" aria-hidden="true">
      <path fill="#fff" d="M19.11 17.38c-.3-.15-1.77-.87-2.05-.97-.28-.1-.48-.15-.69.15-.2.3-.79.97-.97 1.17-.18.2-.36.22-.66.07-.3-.15-1.28-.47-2.44-1.5-.9-.8-1.5-1.77-1.68-2.07-.18-.3-.02-.47.13-.62.13-.13.3-.36.44-.54.15-.18.2-.3.3-.5.1-.2.05-.37-.02-.52-.07-.15-.69-1.67-.95-2.28-.25-.6-.5-.52-.69-.52h-.59c-.2 0-.52.07-.79.37-.27.3-1.04 1.02-1.04 2.5s1.06 2.9 1.21 3.09c.15.2 2.09 3.19 5.06 4.47.71.31 1.26.5 1.69.64.71.23 1.36.2 1.87.12.57-.08 1.77-.72 2.02-1.41.25-.7.25-1.29.18-1.41-.07-.12-.25-.2-.55-.35z"/>
      <path fill="#25D366" d="M26.67 5.35A12.87 12.87 0 0 0 16 1.33c-7.11 0-12.87 5.77-12.87 12.87 0 2.27.6 4.47 1.75 6.42L2.67 30.67 12 28.6c1.87 1.02 3.98 1.56 6.15 1.56 7.11 0 12.87-5.77 12.87-12.87 0-3.43-1.33-6.65-3.77-9zm-10.67 22a10.7 10.7 0 0 1-5.47-1.5l-.39-.23-6.47 1.47 1.38-6.31-.25-.41a10.7 10.7 0 0 1-1.6-5.57c0-5.91 4.81-10.72 10.72-10.72s10.72 4.81 10.72 10.72-4.81 10.72-10.72 10.72z"/>
    </svg>
    <span>WhatsApp RH</span>
  </a>
</div>


<script>
(function(){
  function show(el){ if(el){ el.style.display='block'; } }
  function hide(el){ if(el){ el.style.display='none'; } }
  const btn = document.getElementById('waFloat');
  if(!btn){ return; }
  const welcome = document.querySelector('.welcome') || document.querySelector('section.welcome');
  if(!('IntersectionObserver' in window) || !welcome){
    // Fallback: se não der p/ observar, mostra na home (assumindo página estática)
    show(btn); return;
  }
  const obs = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){ show(btn); } else { hide(btn); }
    });
  }, {threshold: 0.05});
  obs.observe(welcome);
})();
</script>


<!-- RH Admin Panel (Ctrl+Shift+R) -->
<div class="rh-panel-overlay" id="rhPanel">
  <div class="rh-panel">
    <div class="rh-head">
      <h3>Painel RH — Registros</h3>
      <div class="rh-badges"><span class="badge" id="badgeTotal">0 registros</span></div>
      <button class="rh-btn" id="btnCloseRH">Fechar</button>
    </div>
    <div class="rh-body">
      <div class="rh-controls">
        <select id="fType">
          <option value="">Tipo (todos)</option>
          <option value="reclamacao">Reclamação</option>
          <option value="sugestao">Sugestão</option>
          <option value="agendamento_psicologo">Agendamento Psicólogo</option>
        </select>
        <input id="fText" type="text" placeholder="Busca rápida... (setor, texto, nome)"/>
      </div>
      <table class="rh-table" id="rhTable">
        <thead><tr><th>Tipo</th><th>Dados</th><th>Criado em</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="rh-foot">
      <button class="rh-btn" id="btnExport">Exportar CSV</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="appToast">Atalho: Painel RH habilitado (Ctrl+Shift+R)</div>


<script>
/* === v5 IMPACT Scripts === */
(function(){
  // Taglines dinâmicas
  const frases = [
    "Transformamos problemas em soluções reais.",
    "Do desafio ao resultado.",
    "Analisamos rápido. Resolvemos certo.",
    "Sua dúvida, nossa execução.",
    "Soluções que cabem na prática."
  ];
  const sub = document.querySelector('.logo-sub');
  if(sub){
    let i = 0;
    setInterval(()=>{
      i = (i+1) % frases.length;
      sub.textContent = frases[i];
    }, 6000);
  }

  // Toast helper
  function toast(msg, ms=2200){
    const t=document.getElementById('appToast'); if(!t) return;
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(()=> t.classList.remove('show'), ms);
  }
  window._toast = toast;

  // Painel RH (Ctrl+Shift+R)
  const overlay = document.getElementById('rhPanel');
  function openRH(){ if(overlay){ overlay.style.display='flex'; renderRH(); } }
  function closeRH(){ if(overlay){ overlay.style.display='none'; } }

  document.addEventListener('keydown', (e)=>{
    if(e.ctrlKey && e.shiftKey && (e.key==='R' || e.key==='r')){ e.preventDefault(); openRH(); }
    if(e.key==='Escape'){ closeRH(); }
  });
  const btnClose = document.getElementById('btnCloseRH'); if(btnClose) btnClose.addEventListener('click', closeRH);

  // Render RH table
  function getAll(){
    try{ return JSON.parse(localStorage.getItem('LS_records_v1')||'[]'); }catch(e){ return []; }
  }
  function rowData(obj){
    const type = obj.type;
    const d = obj.data || {};
    if(type==='reclamacao') return `Setor: ${d.setor||'-'} | Urgente: ${d.urg||'Não'} | "${(d.texto||'').slice(0,140)}"`;
    if(type==='sugestao')  return `Setor: ${d.setor||'-'} | Urgente: ${d.urg||'Não'} | "${(d.texto||'').slice(0,140)}"`;
    if(type==='agendamento_psicologo') return `Nome: ${d.name||'-'} | RG: ${d.rg||'-'} | ${d.day||'-'} ${d.time||''}`;
    return JSON.stringify(d);
  }
  function renderRH(){
    const tbody = document.querySelector('#rhTable tbody'); if(!tbody) return;
    const tsel = document.getElementById('fType'); const txt = document.getElementById('fText');
    let all = getAll();
    const total = all.length;
    document.getElementById('badgeTotal').textContent = total + ' registros';
    const fType = (tsel && tsel.value)||'';
    const fText = (txt && (txt.value||'').toLowerCase())||'';
    if(fType) all = all.filter(r=> r.type===fType);
    if(fText) all = all.filter(r=> JSON.stringify(r).toLowerCase().includes(fText));
    tbody.innerHTML = all.map(r=> `<tr><td>${r.type}</td><td>${rowData(r)}</td><td>${new Date(r.createdAt).toLocaleString()}</td></tr>`).join('') || '<tr><td colspan="3" style="opacity:.8">Sem registros.</td></tr>';
  }
  const fType = document.getElementById('fType'); if(fType) fType.addEventListener('change', renderRH);
  const fText = document.getElementById('fText'); if(fText) fText.addEventListener('input', renderRH);

  // Export CSV
  function toCSV(arr){
    const head = ['tipo','dados','criado_em'];
    const rows = arr.map(r=> [r.type, rowData(r).replace(/
/g,' ').replace(/"/g,'""'), new Date(r.createdAt).toISOString()]);
    const csv = [head.join(','), ...rows.map(r=> r.map(x=> `"${x}"`).join(','))].join('
');
    return csv;
  }
  function exportCSV(){
    const all = getAll();
    const csv = toCSV(all);
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'linha-de-solucao-registros.csv'; a.click();
    setTimeout(()=> URL.revokeObjectURL(url), 1000);
  }
  const btnExport = document.getElementById('btnExport'); if(btnExport) btnExport.addEventListener('click', exportCSV);

  // Hint toast (first load)
  setTimeout(()=> toast('Painel RH: use Ctrl + Shift + R'), 800);
})();
</script>

<script type="module">

const firebaseConfig = {
  apiKey: "AIzaSyBL6ZwoJcEXFENCQUVv3UX7fTkfOUbQ1MA",
  authDomain: "linhadesolucao.firebaseapp.com",
  projectId: "linhadesolucao",
  storageBucket: "linhadesolucao.firebasestorage.app",
  messagingSenderId: "956194724164",
  appId: "1:956194724164:web:b5248bc45baf453205df11"
};

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
import { getFirestore, addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

function saveLocal(type, data){
  try{
    const key='LS_records_v1';
    const all=JSON.parse(localStorage.getItem(key)||'[]');
    all.push({ type, data, createdAt: new Date().toISOString(), origin: 'local' });
    localStorage.setItem(key, JSON.stringify(all));
  }catch(e){ console.warn('Falha ao salvar local', e); }
}

window.saveRecord = async function saveRecord(type, data){
  try{
    const payload = {
      type,
      data,
      createdAt: serverTimestamp(),
      origin: (typeof location!=='undefined' ? location.href : 'unknown'),
      ua: (typeof navigator!=='undefined' ? navigator.userAgent : 'node')
    };
    await addDoc(collection(db, "ls_registros"), payload);
  }catch(err){
    console.warn('Falha Firestore, salvando local...', err);
    saveLocal(type, data);
  }
};
</script>

</body>
</html>